<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GMARK Local</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div id="app">
      <!-- Loading State -->
      <div id="loading" class="state">
        <div class="spinner"></div>
        <p>L√§dt...</p>
      </div>

      <!-- Main View -->
      <div id="main-view" class="state hidden">
        <header class="modern-header">
          <div class="header-content">
            <div class="logo">
              <span class="logo-icon">üìñ</span>
              <h1>GMARK</h1>
            </div>
            <button id="menu-btn" class="icon-btn" title="Einstellungen">
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"
                />
              </svg>
            </button>
          </div>
        </header>

        <main>
          <!-- Hero Stats with Live Updates -->
          <section class="hero-stats">
            <div class="stat-card pulse">
              <div class="stat-icon">üìö</div>
              <div class="stat-content">
                <span class="stat-value" id="stat-bookmarks">0</span>
                <span class="stat-label">Bookmarks</span>
                <div class="stat-trend positive" id="bookmarks-trend">
                  <svg
                    width="12"
                    height="12"
                    viewBox="0 0 12 12"
                    fill="currentColor"
                  >
                    <path d="M6 2L11 8H1z" />
                  </svg>
                  <span>+12</span>
                </div>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon">üè∑Ô∏è</div>
              <div class="stat-content">
                <span class="stat-value" id="stat-categories">0</span>
                <span class="stat-label">Kategorien</span>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon">üîç</div>
              <div class="stat-content">
                <span class="stat-value" id="stat-duplicates">0</span>
                <span class="stat-label">Duplikate</span>
              </div>
            </div>
          </section>

          <!-- Live Activity Chart -->
          <section class="chart-section">
            <h3 class="section-title">
              <span>üìä Aktivit√§t (7 Tage)</span>
              <span class="live-indicator">‚óè</span>
            </h3>
            <div class="chart-container">
              <canvas id="activityChart"></canvas>
            </div>
          </section>

          <!-- Category Distribution -->
          <section class="chart-section">
            <h3 class="section-title">üéØ Top Kategorien</h3>
            <div class="chart-container compact">
              <canvas id="categoryChart"></canvas>
            </div>
          </section>

          <!-- Quick Actions -->
          <section class="quick-actions">
            <button id="save-current" class="action-btn primary">
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  d="M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"
                />
              </svg>
              <span>Speichern</span>
            </button>

            <button id="view-dashboard" class="action-btn secondary">
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path d="M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z" />
                <path d="M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z" />
              </svg>
              <span>Dashboard</span>
            </button>
          </section>

          <!-- Recent Activity Stream -->
          <section class="activity-stream">
            <h3 class="section-title">‚ö° Letzte Aktivit√§t</h3>
            <div id="recent-list" class="activity-list">
              <!-- Dynamisch geladen -->
            </div>
          </section>
        </main>

        <!-- Quick Settings Menu -->
        <div id="menu" class="quick-menu hidden">
          <div class="menu-header">
            <h3>Schnelleinstellungen</h3>
            <button id="menu-close" class="icon-btn">√ó</button>
          </div>
          <div class="menu-content">
            <button id="menu-settings" class="menu-item">
              <svg
                width="18"
                height="18"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z"
                />
              </svg>
              <span>Einstellungen</span>
            </button>
            <button id="menu-export" class="menu-item">
              <svg
                width="18"
                height="18"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z"
                />
              </svg>
              <span>Export</span>
            </button>
            <button id="manage-duplicates" class="menu-item">
              <svg
                width="18"
                height="18"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" />
                <path
                  fill-rule="evenodd"
                  d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                />
              </svg>
              <span>Duplikate</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Settings View -->
      <div id="settings-view" class="state hidden">
        <header>
          <button id="back-btn" class="icon-btn">‚Üê</button>
          <h1>‚öôÔ∏è Einstellungen</h1>
        </header>

        <main>
          <div class="setting">
            <label>
              <input type="checkbox" id="auto-classify" />
              <span>Automatische Klassifikation</span>
            </label>
            <small>Klassifiziere Bookmarks automatisch beim Speichern</small>
          </div>

          <div class="setting">
            <label>
              <input type="checkbox" id="auto-detect-duplicates" />
              <span>Automatische Duplikat-Erkennung</span>
            </label>
            <small>Erkenne Duplikate automatisch</small>
          </div>

          <div class="setting">
            <label>
              <span>√Ñhnlichkeitsgrenzwert</span>
              <input
                type="range"
                id="similarity-threshold"
                min="0"
                max="1"
                step="0.1"
              />
              <span id="threshold-value">0.8</span>
            </label>
            <small>Je h√∂her, desto √§hnlicher m√ºssen Bookmarks sein</small>
          </div>

          <div class="setting">
            <label>
              <input type="checkbox" id="use-prompt-api" />
              <span>Chrome Prompt API verwenden</span>
            </label>
            <small
              >Nutze lokale KI f√ºr Klassifikation und Zusammenfassung</small
            >
          </div>
        </main>
      </div>

      <!-- Error View -->
      <div id="error-view" class="state hidden">
        <div class="error-box">
          <h2>‚ùå Fehler</h2>
          <p id="error-message"></p>
          <button id="error-close" class="btn btn-secondary">Schlie√üen</button>
        </div>
      </div>

      <!-- Bootstrap View -->
      <div id="bootstrap-view" class="state hidden">
        <header>
          <h1>üöÄ Importiere Bookmarks</h1>
        </header>

        <main>
          <div class="bootstrap-info">
            <p>
              Importiere deine vorhandenen Chrome Bookmarks automatisch in
              GMARK.
            </p>
            <p>
              Jedes Bookmark wird klassifiziert und in die richtige Kategorie
              verschoben.
            </p>
          </div>

          <div id="bootstrap-progress" class="progress-section hidden">
            <div class="progress-bar">
              <div id="progress-fill" class="progress-fill"></div>
            </div>
            <p id="progress-text">Startet...</p>
            <ul id="progress-stats">
              <li>‚úÖ Erfolgreich: <span id="stat-success">0</span></li>
              <li>‚ùå Fehler: <span id="stat-failed">0</span></li>
              <li>‚è≠Ô∏è √úbersprungen: <span id="stat-skipped">0</span></li>
            </ul>
          </div>

          <button id="start-bootstrap-btn" class="btn btn-primary">
            üîÑ Importieren starten
          </button>
        </main>
      </div>
    </div>

    <script src="popup.js" type="module"></script>
  </body>
</html>
